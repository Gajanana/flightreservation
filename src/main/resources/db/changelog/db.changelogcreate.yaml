databaseChangeLog:
  - changeSet:
      id: flightv2
      author: gajanana
      changes:
        - createTable:
            schema: public
            tableName: user
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: version
                  type: int
                  defaultValue: 1
                  constraints:
                    nullable: false
              - column:
                  name: first_name
                  type: varchar(100)
                  constraints:
                    nullable: false
              - column:
                  name: last_name
                  type: varchar(100)
                  constraints:
                    nullable: false
              - column:
                  name: email
                  type: varchar(100)
                  constraints:
                    nullable: false
              - column:
                  name: created_date
                  type: timestamp
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: last_modified_date
                  type: timestamp
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createTable:
            schema: public
            tableName: country
            columns:
              - column:
                  name: id
                  type: int
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(32)
                  constraints:
                    nullable: false
        - createTable:
            schema: public
            tableName: state
            columns:
              - column:
                  name: id
                  type: int
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(32)
                  constraints:
                    nullable: false
        - createTable:
            schema: public
            tableName: city
            columns:
              - column:
                  name: id
                  type: int
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(32)
                  constraints:
                    nullable: false
        - createTable:
            schema: public
            tableName: address
            columns:
              - column:
                    name: id
                    type: int
                    startWith: 100
                    constraints:
                      primaryKey: true
                      nullable: false
              - column:
                  name: addressline
                  type: varchar(10)
                  constraints:
                    nullable: false
              - column:
                  name: zipcode
                  type: varchar(10)
                  constraints:
                    nullable: false
              - column:
                  name: country
                  type: varchar(100)
                  constraints:
                    nullable: false
        - createTable:
            schema: public
            tableName: contact
            columns:
              - column:
                  name: id
                  type: int
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(32)
                  constraints:
                    nullable: false
              - column:
                  name: email
                  type: varchar(32)
                  constraints:
                    nullable: false
              - column:
                  name: cell
                  type: varchar(16)
                  constraints:
                    nullable: false
              - column:
                  name: tel
                  type: varchar(16)
                  constraints:
                    nullable: false
              - column:
                  name: address
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_address_contct_address_id
                    references: address(id)

        - createTable:
            schema: public
            tableName: airport
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: code
                  type: varchar(10)
                  defaultValue: 1
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: varchar(100)
                  constraints:
                    nullable: false
              - column:
                  name: address_id
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_address_airport_address_id
                    references: address(id)
              - column:
                  name: created_date
                  type: timestamp
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: last_modified_date
                  type: timestamp
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
        - createTable:
            schema: public
            tableName: airline
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: code
                  type: varchar(10)
                  defaultValue: 1
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: varchar(100)
                  constraints:
                    nullable: false
        - createTable:
            schema: public
            tableName: aircraft
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: airline
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_airline_aircraft_airline_id
                    references: airline(id)
              - column:
                  name: capacity
                  type: int
                  constraints:
                    nullable: false
        - createTable:
            schema: public
            tableName: seat
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: seat_no
                  type: int
                  constraints:
                    nullable: false
              - column:
                  name: availability
                  type: boolean
                  defaultValueBoolean: true
                  constraints:
                    nullable: false
              - column:
                  name: location
                  type: varchar(25)
                  constraints:
                    nullable: false
              - column:
                  name: seat_class
                  type: varchar(25)
                  constraints:
                    nullable: false
              - column:
                  name: aircraft_id
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_aircraft_seat_aircraft_id
                    references: aircraft(id)
        - createTable:
            schema: public
            tableName: hop
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: arrival_time
                  type: timestamp
                  constraints:
                    nullable: false
              - column:
                  name: departure_time
                  type: timestamp
                  constraints:
                    nullable: false
              - column:
                  name: distance
                  type: float
                  constraints:
                    nullable: false
              - column:
                  name: base_fair
                  type: float
                  constraints:
                    nullable: false
              - column:
                  name: aircraft
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_aircraft_hop_aircraft_id
                    references: aircraft(id)
              - column:
                  name: arrival_airport
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_airport_hop_arrival_airport_id
                    references: airport(id)
              - column:
                  name: departure_airport
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_airport_hop_departure_airport_id
                    references: airport(id)
        - createTable:
            schema: public
            tableName: trip
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: arrival_time
                  type: timestamp
                  constraints:
                    nullable: false
              - column:
                  name: departure_time
                  type: timestamp
                  constraints:
                    nullable: false
              - column:
                  name: aircraft
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_aircraft_trip_aircraft_id
                    references: aircraft(id)
              - column:
                  name: arrival_airport
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_airport_trip_arrival_airport_id
                    references: airport(id)
              - column:
                  name: departure_airport
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_airport_trip_departure_airport_id
                    references: airport(id)
              - column:
                  name: user
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_user_trip_user_id
                    references: user(id)
        - createTable:
            schema: public
            tableName: passenger
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type:  varchar(100)
                  constraints:
                    nullable: false
              - column:
                  name: age
                  type: int
                  defaultValue: 18
                  constraints:
                    nullable: false
              - column:
                  name: user
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_user_psgr_user_id
                    references: user(id)
        - createTable:
            schema: public
            tableName: transactions
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: price
                  type: float
                  constraints:
                    nullable: false
              - column:
                  name: discount
                  type: float
#              - column:
#                  name: charges
#                  type: float    #we can calcualte based on date
              - column:
                  name: booking_date
                  type: datetime
                  defaultValueComputed: CURRENT_TIMESTAMP
                  constraints:
                    nullable: false
              - column:
                  name: departure_date
                  type: datetime
                  constraints:
                    nullable: false
              - column:
                  name: user
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_user_txn_user_id
                    references: user(id)
        #              - column:
#                  name: itinerary
#                  type: int
#                  constraints:
#                    nullable: false
#                    foreignKeyName: fk_itinerary_txn_itinerary_id
#                    references: itinerary(id)
              - column:
                  name: tax
                  type: float
                  constraints:
                    nullable: false
              - column:
                  name: trip
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_trip_txn_trip_id
                    references: trip(id)
        - createTable:
            schema: public
            tableName: itinerary
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: trip
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_itinerary_fare_itinerary_id
                    references: trip(id)
              - column:
                  name: passenger
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_itinerary_passenger_itinerary_id
                    references: passenger(id)
              - column:
                  name: aircraft
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_itinerary_aircraft_itinerary_id
                    references: aircraft(id)
              - column:
                  name: seat
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_seat_aircraft_seat_id
                    references: seat(id)
        - createTable:
            schema: public
            tableName: airport_access
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: airport
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_airport_port_airport_id
                    references: airport(id)
              - column:
                  name: aircraft
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_aircraft_airportaccess_aircraft_id
                    references: aircraft(id)
        - createTable:
            schema: public
            tableName: branch
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(16)
                  constraints:
                    nullable: false
              - column:
                  name: address
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_address_branch_address_id
                    references: address(id)
        - createTable:
            schema: public
            tableName: trip_hop
            columns:
              - column:
                  name: id
                  type: int
                  autoIncrement: true
                  startWith: 100
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: hop
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_hop_triphop_hop_id
                    references: hop(id)
              - column:
                  name: trip
                  type: int
                  constraints:
                    nullable: false
                    foreignKeyName: fk_trip_has_trip_id
                    references: trip(id)
#  - changeSet:
#      id: 02-item-events-trigger
#      author: gajanana
#      dbms: '!h2'
#      changes:
#        - sqlFile:
#            encoding: utf-8
#            splitStatements: false
#            path: db/notification/item_saved_trigger.sql
#            stripComments: true
#        - sqlFile:
#            encoding: utf-8
#            splitStatements: false
#            path: db/notification/item_deleted_trigger.sql
#            stripComments: true
#
#  - changeSet:
#      id: 03-add-relations
#      author: ajacquot
#      changes:
#        - createTable:
#            schema: public
#            tableName: User
#            columns:
#              - column:
#                  name: id
#                  type: int
#                  autoIncrement: true
#                  startWith: 100
#                  constraints:
#                    primaryKey: true
#                    nullable: false
#              - column:
#                  name: version
#                  defaultValue: 1
#                  type: int
#                  constraints:
#                    nullable: false
#              - column:
#                  name: first_name
#                  type: varchar(100)
#                  constraints:
#                    nullable: false
#              - column:
#                  name: last_name
#                  type: varchar(100)
#                  constraints:
#                    nullable: false
#              - column:
#                  name: created_date
#                  type: timestamp
#                  defaultValueComputed: CURRENT_TIMESTAMP
#                  constraints:
#                    nullable: false
#              - column:
#                  name: last_modified_date
#                  type: timestamp
#                  defaultValueComputed: CURRENT_TIMESTAMP
#                  constraints:
#                    nullable: false
#        - createTable:
#            schema: public
#            tableName: tag
#            columns:
#              - column:
#                  name: id
#                  type: int
#                  autoIncrement: true
#                  startWith: 100
#                  constraints:
#                    primaryKey: true
#                    nullable: false
#              - column:
#                  name: version
#                  type: int
#                  defaultValue: 1
#                  constraints:
#                    nullable: false
#              - column:
#                  name: name
#                  type: varchar(100)
#                  constraints:
#                    nullable: false
#              - column:
#                  name: created_date
#                  type: timestamp
#                  defaultValueComputed: CURRENT_TIMESTAMP
#                  constraints:
#                    nullable: false
#              - column:
#                  name: last_modified_date
#                  type: timestamp
#                  defaultValueComputed: CURRENT_TIMESTAMP
#                  constraints:
#                    nullable: false
#        - addColumn:
#            schema: public
#            tableName: item
#            columns:
#              name: assignee_id
#              type: int
#              constraints:
#                foreignKeyName: fk_item_assignee_id
#                references: User(id)
#        - createTable:
#            schema: public
#            tableName: item_tag
#            columns:
#              - column:
#                  name: id
#                  type: int
#                  autoIncrement: true
#                  startWith: 100
#                  constraints:
#                    primaryKey: true
#                    nullable: false
#              - column:
#                  name: item_id
#                  type: int
#                  constraints:
#                    nullable: false
#                    foreignKeyName: fk_item_tag_item_id
#                    references: item(id)
#              - column:
#                  name: tag_id
#                  type: int
#                  constraints:
#                    nullable: false
#                    foreignKeyName: fk_item_tag_tag_id
#                    references: tag(id)
#
#  - changeSet:
#      id: 04-add-mock-data
#      author: ajacquot
#      dbms: '!h2'
#      changes:
#        - sqlFile:
#            encoding: utf-8
#            splitStatements: false
#            path: db/mock/insert_mock_people.sql
#        - sqlFile:
#            encoding: utf-8
#            splitStatements: false
#            path: db/mock/insert_mock_tags.sql
#        - sqlFile:
#            encoding: utf-8
#            splitStatements: false
#            path: db/mock/insert_mock_items.sql
#        - sqlFile:
#            encoding: utf-8
#            splitStatements: false
#            path: db/mock/insert_mock_item_tags.sql
